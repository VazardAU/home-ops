---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: anchorleverage-testnet
  namespace: crypto
  labels:
    app.kubernetes.io/instance: anchorleverage-testnet
    app.kubernetes.io/name: anchorleverage-testnet
spec:
  replicas: 1
  selector:
    matchLabels:
      app.kubernetes.io/instance: anchorleverage-testnet
      app.kubernetes.io/name: anchorleverage-testnet
  template:
    metadata:
      labels:
        app.kubernetes.io/instance: anchorleverage-testnet
        app.kubernetes.io/name: anchorleverage-testnet
    spec:
      containers:
        - image: luigi311/anchorleverage:20220304
          imagePullPolicy: IfNotPresent
          name: anchorleverage
          env:
            - name: SLEEP_DURATION
              value: "600"
            - name: TIMEOUT_DURATION
              value: "5"
            - name: DEBUG
              value: "False"
            - name: NOTIFY_TELEGRAM
              value: "False"
            - name: TELEGRAM_TOKEN
              value: ""
            - name: TELEGRAM_CHAT_ID
              value: ""
            - name: PASSWORD
              value: "${SECRET_ANCHOR_PASSWORD}"
            - name: CHAIN_ID
              value: "bombay-12"
              # value: "columbus-5"
            - name: WALLET_MIN_UST_BALANCE
              value: "10"
            - name: WALLET_MAX_UST_BALANCE
              value: "20"
            - name: MAX_SPREAD
              value: "0.01"
            - name: ANCHOR_USAGE_TARGET_PERCENTAGE
              value: "75"
            - name: ANCHOR_USAGE_MIN_PERCENTAGE
              value: "70"
            - name: ANCHOR_USAGE_MAX_PERCENTAGE
              value: "85"
            - name: ANCHOR_ANC_MAX_BALANCE
              value: "20"
            - name: UST_EARN_TO_BORROW_TARGET_RATIO
              value: "30"
            - name: UST_EARN_TO_BORROW_MIN_RATIO
              value: "20"
            - name: UST_EARN_TO_BORROW_MAX_RATIO
              value: "40"
            - name: DELEVERAGE_BORROW_USAGE_TARGET
              value: "90"
          volumeMounts:
            - name: env
              mountPath: /app/.env
              subPath: .env
      volumes:
        - name: env
          configMap:
            name: anchorleverage-testnet
